# Quadrotor-Trajectory-Tracking-PD-Feedforward-Simulink
# 基于前馈补偿PD的四旋翼无人机轨迹跟踪控制 (Simulink仿真)

## 1. 项目背景与简介
本项目是 **物联网控制技术** 课程设计内容。

项目核心工作是基于 MATLAB/Simulink 平台，复现了学术论文 **《基于前馈补偿的PD四旋翼无人机轨迹跟踪控制》** 中的控制算法。针对四旋翼无人机在飞行过程中面临的非线性、强耦合以及抗干扰问题，本项目构建了完整的 **六自由度动力学模型**，并采用了双闭环控制策略：
* **外环（位置环）**：采用基于前馈补偿的 PD 控制算法，负责计算期望的姿态角。
* **内环（姿态环）**：采用 PD 控制算法，负责快速跟踪期望姿态。

**特别说明**：代码为个人复现与改进版本，旨在验证论文理论的有效性，可能存在参数差异和代码缺陷，如有问题欢迎指正。

---

## 2. 复现细节与改进创新
在复现原论文核心算法的基础上，本项目**着重改进了测试验证策略**。原论文通常仅使用单一轨迹进行验证，而本项目在 `wzctrl.m` 中扩展了 **四种不同类型的测试轨迹**，以全面评估算法在不同工况下的鲁棒性：

1.  **高度跃升 (Altitude Step)**：
    * 测试无人机在垂直方向上的阶跃响应能力，观察超调量与稳态误差。
2.  **螺旋上升 (Spiral Ascent)**：
    * 这是原论文中的基准测试轨迹，用于验证 X、Y、Z 三轴联动时的跟踪精度。
3.  **8字形飞行 (Figure-8)**：
    * 测试无人机在水平面内进行连续转弯时的耦合机动性能，考验前馈补偿对动态误差的抑制。
4.  **矩形巡航 (Square Patrol)**：
    * 模拟直角转弯路径，测试系统对位置突变信号（非平滑路径）的瞬态响应能力。

---

## 3. 项目文件结构说明
以下是项目中各个核心文件的功能解释：

| 文件名称 | 类型 | 功能详细说明 |
| :--- | :--- | :--- |
| **matlab2024b.slx** | 仿真模型 | 项目的主入口文件。包含了完整的 Simulink 框图（无人机物理模型、控制器模块、信号连接）。<br>**注意**：请使用MATLAB 2024b或更高版本打开。 |
| **wzctrl.m** | 核心脚本 | **位置控制器 (外环)**。这是本项目**改动最大**的文件。它不仅包含了 PD 控制律和前馈项的计算，还集成了上述 4 种测试轨迹的生成逻辑。 |
| **ztctrl.m** | 脚本 | **姿态控制器 (内环)**。它接收来自位置环的期望角度（Roll, Pitch）和偏航角（Yaw），计算出电机所需的升力力矩。 |
| **UAV.m** | 脚本 | **被控对象模型**。基于牛顿-欧拉方程建立的四旋翼无人机六自由度非线性动力学方程（S-Function），模拟真实的物理特性。 |
| **TD1.m / TD2.m** | 脚本 | **跟踪微分器 (Tracking Differentiator)**。用于对输入信号进行平滑处理，并提取高质量的微分信号（速度/加速度），辅助控制器减少噪声干扰。 |
---

## 4. 如何运行与切换测试
由于本项目集成了多种测试场景，运行前请务必按照以下步骤操作：

1.  **启动 MATLAB**：确保工作路径已切换到本项目文件夹。
2.  **打开模型**：双击打开 `matlab2018b.slx`。
3.  **选择测试轨迹 (关键步骤)**：
    * 打开 `wzctrl.m` 文件。
    * 找到 `mdlOutputs` 函数中的 **“轨迹生成模块”** 区域。
    * 代码中预设了 4 个场景的代码块，分别用 `%{ ... %}` 包裹。
    * **请手动取消注释你想要测试的那一种轨迹，并确保其他三种轨迹处于注释状态。**
4.  **运行仿真**：点击 Simulink 界面上方的 Run 按钮。
5.  **查看结果**：双击模型中的 Scope（示波器）查看位置跟踪曲线 `(x, y, z)` 和误差曲线。

---

## 5. 参考与致谢
* **核心算法来源**：刘栩粼, 胡德清. 《基于前馈补偿的PD四旋翼无人机轨迹跟踪控制》.
* **模型基础**：基于常规四旋翼动力学建模理论。

如果您对代码中的数学推导等内容有疑问，请参考 **PDF 论文** 以及代码中的详细注释。
